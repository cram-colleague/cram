<template name="Profile_Page">
  {{#if Template.subscriptionsReady}}
    <div class="ui container">
      <br />
      {{#each profile in profileList}}
      <a class="{{ isActiveRoute 'Add_Messenger_Page'}} item" href="{{ pathFor 'Add_Messenger_Page' _id=profile._id }}"><button class="ui orange basic button" style="float: right">Message</button></a>
      {{/each}}
      <h2 class="ui dividing header"><i class="child icon"></i>  Profile</h2>
      <br />
        <div class="ui three column grid container">
          <div class="column">
            <div class="ui fluid card">
              <div class="content">
                <h2 class="ui header">{{ profileField 'first' }} {{ profileField 'last' }}</h2>
              </div>
              <div class="ui image">
                <img src="{{ profileField 'pic' }}" alt="Image not found" onerror="this.onerror=null; this.src='/images/user.png';">
              </div>
              <!--<div class="content">-->
                <!--<h2 class="ui header">{{ profileField 'first' }} {{ profileField 'last' }}</h2>-->
              <!--</div>-->
            </div>
          </div>
          <div class="column">
            <table class="ui fixed grey celled table">
              <tbody>
              <tr>
                <td>
                  <div class="content">Previous Courses</div>
                </td>
                <td>{{ profileField 'preCourse' }}</td>
              </tr>
              <tr>
                <td>
                  <div class="content">Current Courses</div>
                </td>
                <td>{{ profileField 'currCourse' }}</td>
              </tr>
              <tr>
                <td>
                  <div class="content">Description</div>
                </td>
                <td>{{ profileField 'description' }}</td>
              </tr>
              </tbody>
            </table>
          </div>
    {{#if canShowS}}

          <div class="column">
            <table class="ui single line table">
              <thead>
                <tr>
                  <th>Class</th>
                  <th>Teacher</th>
                  <th>Learner</th>
                </tr>
              </thead>
              <tbody>
          {{#each session in sessionList}}
            {{#each profile in profileList}}
            {{#if sizeded profile.owner}}
                <tr>
                  <td>{{ session.name }}</td>
                  <td></td>
                  <td><i class="large green checkmark icon"></i></td>
                </tr>
             {{/if}}
            {{#if sizedad profile.first profile.last}}
              <tr>
                <td>{{ session.name }}</td>
                <td><i class="large green checkmark icon"></i></td>
                <td></td>
              </tr>
            {{/if}}
            {{/each}}
          {{/each}}
              </tbody>
            </table>
          </div>
      {{else}}
        <p>Haven't joined the study session yet</p>
      {{/if}}
        </div>
        <div class="ui one column center aligned page grid">
          <div class="column twelve wide">
            <button class="ui button" onclick="goBack()">Go Back</button>

            <script>
              function goBack() {
                window.history.back();
              }
            </script>
          </div>
        </div>
    </div>
  {{/if}}
</template>
